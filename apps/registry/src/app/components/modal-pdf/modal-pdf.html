<div class="pdf-modal-container">
  <!-- El botón flotante anterior ha sido eliminado de aquí. -->

  <!-- Estado de Carga: Se muestra mientras se genera el PDF. -->
  @if (isLoading) {
  <div class="feedback-container">
    <div class="tw-spinner-with-text">
      <div class="tw-spinner-rnpn-lg"></div>
      <p class="tw-spinner-text">Generando vista previa...</p>
    </div>
  </div>
  }

  <!-- Estado de Error: Se muestra si algo falla. -->
  @if (errorMessage && !isLoading) {
  <div class="feedback-container text-red-600">
    <i class="pi pi-times-circle" style="font-size: 2.5rem"></i>
    <p class="mt-3 font-semibold">{{ errorMessage }}</p>
  </div>
  }

  <!-- Visualizador de PDF: Se muestra cuando el PDF está listo. -->
  @if (pdfUrl && !isLoading) {
  <iframe [src]="pdfUrl" frameborder="0" class="pdf-iframe"></iframe>
  }

  <!-- SOLUCIÓN: Contenedor para el nuevo botón de cierre -->
  <div class="modal-footer">
    <button class="tw-btn-rnpn" (click)="closeModal()">
      <i class="pi pi-times tw-mr-2"></i>
      Cerrar
    </button>
  </div>
</div>
